{"title":"如何在Ubuntu Server16.04上安装Nginx1.10.0 PHP7 MySQL5.7","slug":"how-to-install-nginx-php7-mysql-on-ubuntu16-04","date":"2016-06-07T11:05:19.000Z","updated":"2016-12-23T14:30:41.000Z","comments":true,"path":"api/articles/how-to-install-nginx-php7-mysql-on-ubuntu16-04.json","excerpt":"本教程以运行在vagrant上的ubuntu-16.04-server为例安装PHP71<br>sudo apt-get install php-fpm<br>[Option]通过php -v命令确认安装版本为PHP7<br>                                                         [Figure] ","covers":["https://i.imgur.com/4eUWKKc.jpg","https://i.imgur.com/N3y7uuR.jpg","https://i.imgur.com/X8Hgkmt.jpg","https://i.imgur.com/64EsK3Z.jpg","https://i.imgur.com/tBQuak7.jpg","https://i.imgur.com/brlRuKU.jpg","https://i.imgur.com/7hnmSuH.jpg"],"content":"<p><strong>本教程以运行在vagrant上的ubuntu-16.04-server为例</strong></p>\n<hr>\n<h3 id=\"安装PHP7\"><a href=\"#安装PHP7\" class=\"headerlink\" title=\"安装PHP7\"></a>安装PHP7</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install php-fpm</span><br></pre></td></tr></table></figure>\n<p>[Option]通过<strong>php -v</strong>命令确认安装版本为PHP7<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.imgur.com/4eUWKKc.jpg\" alt=\"Imgur\" title=\"\">\n                </div>\n                <div class=\"image-caption\">Imgur</div>\n            </figure><br>[Test]在/var/www/html目录下新建index.php文件<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo vi /var/www/html/index.php</span><br></pre></td></tr></table></figure></p>\n<p>按i进入编辑模式，左下角出现insert。使用phpinfo()输出php环境信息。<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">    phpinfo();</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>按ESC键退出编辑模式，左下角insert消失。输入:wq命令保存并退出，或连续按两次Z使用快捷键保存并退出。<br><a id=\"more\"></a></p>\n<hr>\n<h3 id=\"安装Nginx\"><a href=\"#安装Nginx\" class=\"headerlink\" title=\"安装Nginx\"></a>安装Nginx</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install nginx</span><br></pre></td></tr></table></figure>\n<p>安装完成后，Nginx默认直接启动。通过命令<strong>curl localhost</strong>查看localhost/index.nginx-debian.html页面源代码，可以确认Nginx运行正常。<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.imgur.com/N3y7uuR.jpg\" alt=\"Imgur\" title=\"\">\n                </div>\n                <div class=\"image-caption\">Imgur</div>\n            </figure><br>或通过浏览器访问<a href=\"https://localhost:8080/index.nginx-debian.html\" target=\"_blank\" rel=\"noopener\">https://localhost:8080/index.nginx-debian.html</a><br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.imgur.com/X8Hgkmt.jpg\" alt=\"Imgur\" title=\"\">\n                </div>\n                <div class=\"image-caption\">Imgur</div>\n            </figure><br>修改Nginx配置文件(/etc/nginx/sites-available/default)，使其解析PHP文件。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo vi /etc/nginx/sites-available/default</span><br></pre></td></tr></table></figure></p>\n<p>按i进入编辑模式，左下角出现insert。<br>将Default server configuration下面的默认server配置替换为<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen 80 default_server;</span><br><span class=\"line\">    listen [::]:80 default_server;</span><br><span class=\"line\"></span><br><span class=\"line\">    root /var/www/html;</span><br><span class=\"line\">    index index.php index.html index.htm index.nginx-debian.html;</span><br><span class=\"line\"></span><br><span class=\"line\">    server_name localhost;</span><br><span class=\"line\"></span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        try_files <span class=\"variable\">$uri</span> <span class=\"variable\">$uri</span>/ =404;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    location ~ \\.php$ &#123;</span><br><span class=\"line\">        include snippets/fastcgi-php.conf;</span><br><span class=\"line\">        fastcgi_pass unix:/run/php/php7.0-fpm.sock;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    location ~ /\\.ht &#123;</span><br><span class=\"line\">        deny all;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>(即：在index添加index.php默认解析主页，取消.php的location注释)<br>按ESC键退出编辑模式，左下角insert消失。输入:wq命令保存并退出，或连续按两次Z使用快捷键保存并退出。<br>[Test] 如有其它配置修改，可使用<strong>sudo nginx -t</strong>检测配置文件是否有语法错误<br>重新启动Nginx服务<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo service nginx restart</span><br></pre></td></tr></table></figure></p>\n<p>[Test]使用curl localhost 即可看到phpinfo()输出PHP7运行环境的HTML源代码，或通过浏览器访问localhost<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.imgur.com/64EsK3Z.jpg\" alt=\"Imgur\" title=\"\">\n                </div>\n                <div class=\"image-caption\">Imgur</div>\n            </figure></p>\n<hr>\n<h3 id=\"安装MySQL5-7\"><a href=\"#安装MySQL5-7\" class=\"headerlink\" title=\"安装MySQL5.7\"></a>安装MySQL5.7</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install mysql-server</span><br></pre></td></tr></table></figure>\n<p>设置MySQL root用户的密码<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.imgur.com/tBQuak7.jpg\" alt=\"Imgur\" title=\"\">\n                </div>\n                <div class=\"image-caption\">Imgur</div>\n            </figure><br>再次输入密码进行确认<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.imgur.com/brlRuKU.jpg\" alt=\"Imgur\" title=\"\">\n                </div>\n                <div class=\"image-caption\">Imgur</div>\n            </figure><br>登录MySQL<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -uroot -p</span><br></pre></td></tr></table></figure></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.imgur.com/7hnmSuH.jpg\" alt=\"Imgur\" title=\"\">\n                </div>\n                <div class=\"image-caption\">Imgur</div>\n            </figure>\n<hr>\n<p>至此，Nginx1.10.0+PHP7+MySQL5.7全部安装完毕。</p>\n","more":"</p>\n<hr>\n<h3 id=\"安装Nginx\"><a href=\"#安装Nginx\" class=\"headerlink\" title=\"安装Nginx\"></a>安装Nginx</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install nginx</span><br></pre></td></tr></table></figure>\n<p>安装完成后，Nginx默认直接启动。通过命令<strong>curl localhost</strong>查看localhost/index.nginx-debian.html页面源代码，可以确认Nginx运行正常。<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.imgur.com/N3y7uuR.jpg\" alt=\"Imgur\" title=\"\">\n                </div>\n                <div class=\"image-caption\">Imgur</div>\n            </figure><br>或通过浏览器访问<a href=\"https://localhost:8080/index.nginx-debian.html\" target=\"_blank\" rel=\"noopener\">https://localhost:8080/index.nginx-debian.html</a><br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.imgur.com/X8Hgkmt.jpg\" alt=\"Imgur\" title=\"\">\n                </div>\n                <div class=\"image-caption\">Imgur</div>\n            </figure><br>修改Nginx配置文件(/etc/nginx/sites-available/default)，使其解析PHP文件。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo vi /etc/nginx/sites-available/default</span><br></pre></td></tr></table></figure></p>\n<p>按i进入编辑模式，左下角出现insert。<br>将Default server configuration下面的默认server配置替换为<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen 80 default_server;</span><br><span class=\"line\">    listen [::]:80 default_server;</span><br><span class=\"line\"></span><br><span class=\"line\">    root /var/www/html;</span><br><span class=\"line\">    index index.php index.html index.htm index.nginx-debian.html;</span><br><span class=\"line\"></span><br><span class=\"line\">    server_name localhost;</span><br><span class=\"line\"></span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        try_files <span class=\"variable\">$uri</span> <span class=\"variable\">$uri</span>/ =404;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    location ~ \\.php$ &#123;</span><br><span class=\"line\">        include snippets/fastcgi-php.conf;</span><br><span class=\"line\">        fastcgi_pass unix:/run/php/php7.0-fpm.sock;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    location ~ /\\.ht &#123;</span><br><span class=\"line\">        deny all;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>(即：在index添加index.php默认解析主页，取消.php的location注释)<br>按ESC键退出编辑模式，左下角insert消失。输入:wq命令保存并退出，或连续按两次Z使用快捷键保存并退出。<br>[Test] 如有其它配置修改，可使用<strong>sudo nginx -t</strong>检测配置文件是否有语法错误<br>重新启动Nginx服务<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo service nginx restart</span><br></pre></td></tr></table></figure></p>\n<p>[Test]使用curl localhost 即可看到phpinfo()输出PHP7运行环境的HTML源代码，或通过浏览器访问localhost<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.imgur.com/64EsK3Z.jpg\" alt=\"Imgur\" title=\"\">\n                </div>\n                <div class=\"image-caption\">Imgur</div>\n            </figure></p>\n<hr>\n<h3 id=\"安装MySQL5-7\"><a href=\"#安装MySQL5-7\" class=\"headerlink\" title=\"安装MySQL5.7\"></a>安装MySQL5.7</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install mysql-server</span><br></pre></td></tr></table></figure>\n<p>设置MySQL root用户的密码<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.imgur.com/tBQuak7.jpg\" alt=\"Imgur\" title=\"\">\n                </div>\n                <div class=\"image-caption\">Imgur</div>\n            </figure><br>再次输入密码进行确认<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.imgur.com/brlRuKU.jpg\" alt=\"Imgur\" title=\"\">\n                </div>\n                <div class=\"image-caption\">Imgur</div>\n            </figure><br>登录MySQL<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -uroot -p</span><br></pre></td></tr></table></figure></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.imgur.com/7hnmSuH.jpg\" alt=\"Imgur\" title=\"\">\n                </div>\n                <div class=\"image-caption\">Imgur</div>\n            </figure>\n<hr>\n<p>至此，Nginx1.10.0+PHP7+MySQL5.7全部安装完毕。</p>","categories":[],"tags":[{"name":"Ubuntu","path":"api/tags/Ubuntu.json"}]}